"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8476],{48476:function(N,k,R){R.r(k),R.d(k,{STLLoader:function(){return H}});var a=R(99477);class H extends a.aNw{constructor(w){super(w)}load(w,v,B,C){const L=this,x=new a.hH6(this.manager);x.setPath(this.path),x.setResponseType("arraybuffer"),x.setRequestHeader(this.requestHeader),x.setWithCredentials(this.withCredentials),x.load(w,function(I){try{v(L.parse(I))}catch(A){C?C(A):console.error(A),L.manager.itemError(w)}},B,C)}parse(w){function v(e){const t=new DataView(e),o=32/8*3+32/8*3*3+16/8,l=t.getUint32(80,!0);if(80+32/8+l*o===t.byteLength)return!0;const i=[115,111,108,105,100];for(let s=0;s<5;s++)if(B(i,t,s))return!1;return!0}function B(e,t,o){for(let l=0,g=e.length;l<g;l++)if(e[l]!==t.getUint8(o+l))return!1;return!0}function C(e){const t=new DataView(e),o=t.getUint32(80,!0);let l,g,i,s=!1,m,S,U,E,T;for(let r=0;r<70;r++)t.getUint32(r,!1)==1129270351&&t.getUint8(r+4)==82&&t.getUint8(r+5)==61&&(s=!0,m=new Float32Array(o*3*3),S=t.getUint8(r+6)/255,U=t.getUint8(r+7)/255,E=t.getUint8(r+8)/255,T=t.getUint8(r+9)/255);const d=84,n=12*4+2,u=new a.u9r,h=new Float32Array(o*3*3),p=new Float32Array(o*3*3),F=new a.Ilk;for(let r=0;r<o;r++){const y=d+r*n,P=t.getFloat32(y,!0),b=t.getFloat32(y+4,!0),D=t.getFloat32(y+8,!0);if(s){const c=t.getUint16(y+48,!0);c&32768?(l=S,g=U,i=E):(l=(c&31)/31,g=(c>>5&31)/31,i=(c>>10&31)/31)}for(let c=1;c<=3;c++){const V=y+c*12,f=r*3*3+(c-1)*3;h[f]=t.getFloat32(V,!0),h[f+1]=t.getFloat32(V+4,!0),h[f+2]=t.getFloat32(V+8,!0),p[f]=P,p[f+1]=b,p[f+2]=D,s&&(F.setRGB(l,g,i,a.KI_),m[f]=F.r,m[f+1]=F.g,m[f+2]=F.b)}}return u.setAttribute("position",new a.TlE(h,3)),u.setAttribute("normal",new a.TlE(p,3)),s&&(u.setAttribute("color",new a.TlE(m,3)),u.hasColors=!0,u.alpha=T),u}function L(e){const t=new a.u9r,o=/solid([\s\S]*?)endsolid/g,l=/facet([\s\S]*?)endfacet/g,g=/solid\s(.+)/;let i=0;const s=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+s+s+s,"g"),S=new RegExp("normal"+s+s+s,"g"),U=[],E=[],T=[],d=new a.Pa4;let n,u=0,h=0,p=0;for(;(n=o.exec(e))!==null;){h=p;const F=n[0],r=(n=g.exec(F))!==null?n[1]:"";for(T.push(r);(n=l.exec(F))!==null;){let b=0,D=0;const c=n[0];for(;(n=S.exec(c))!==null;)d.x=parseFloat(n[1]),d.y=parseFloat(n[2]),d.z=parseFloat(n[3]),D++;for(;(n=m.exec(c))!==null;)U.push(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])),E.push(d.x,d.y,d.z),b++,p++;D!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+i),b!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+i),i++}const y=h,P=p-h;t.userData.groupNames=T,t.addGroup(y,P,u),u++}return t.setAttribute("position",new a.a$l(U,3)),t.setAttribute("normal",new a.a$l(E,3)),t}function x(e){return typeof e!="string"?new TextDecoder().decode(e):e}function I(e){if(typeof e=="string"){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o)&255;return t.buffer||t}else return e}const A=I(w);return v(A)?C(A):L(x(w))}}}}]);
